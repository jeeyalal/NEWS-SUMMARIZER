import tkinter as tk
from tkinter import ttk
import nltk
from textblob import TextBlob
from newspaper import Article


# function for btn summarize
def summarize():
    url = utext.get("1.0", "end").strip()
    article = Article(url)
    article.download()
    article.parse()

    nltk.download("punkt")
    article.nlp()

    title.config(state="normal")
    author.config(state="normal")
    publication.config(state="normal")
    summary.config(state="normal")
    sentiment.config(state="normal")

    title.delete("1.0", "end")
    title.insert("1.0", article.title)
    author.delete("1.0", "end")
    author.insert("1.0", ", ".join(article.authors))
    publication.delete("1.0", "end")
    publication.insert("1.0", article.publish_date)
    summary.delete("1.0", "end")
    summary.insert("1.0", article.summary)

    # sentiment analysis
    analysis = TextBlob(article.text)
    sentiment.delete("1.0", "end")
    sentiment.insert(
        "1.0",
        f'Polarity: {analysis.polarity}, Sentiment: {"positive" if analysis.polarity > 0 else "negative" if analysis.polarity < 0 else "neutral"}',
    )

    title.config(state="disabled")
    author.config(state="disabled")
    publication.config(state="disabled")
    summary.config(state="disabled")
    sentiment.config(state="disabled")


# GUI
root = tk.Tk()
root.title("News Summarizer")
root.geometry("1200x700")
root.configure(bg='#f2f2f2')

# Styles
style = ttk.Style()
style.configure('TLabel', font=('Helvetica', 12), background='#f2f2f2')
style.configure('TButton', font=('Helvetica', 12, 'bold'), background='#4CAF50', foreground='white')
style.configure('TText', font=('Helvetica', 12), background='#ffffff')

# Title label and text box
tlable = ttk.Label(root, text="Title")
tlable.pack(pady=5)
title = tk.Text(root, height=2, width=140, wrap='word')
title.config(state="disabled", bg="#eeeeee")
title.pack()

# Author label and text box
alable = ttk.Label(root, text="Author")
alable.pack(pady=5)
author = tk.Text(root, height=1, width=140, wrap='word')
author.config(state="disabled", bg="#eeeeee")
author.pack()

# Publication date label and text box
plable = ttk.Label(root, text="Publishing Date")
plable.pack(pady=5)
publication = tk.Text(root, height=1, width=140, wrap='word')
publication.config(state="disabled", bg="#eeeeee")
publication.pack()

# Summary label and text box
slable = ttk.Label(root, text="Summary")
slable.pack(pady=5)
summary = tk.Text(root, height=20, width=140, wrap='word')
summary.config(state="disabled", bg="#eeeeee")
summary.pack()

# Sentiment label and text box
slabel = ttk.Label(root, text="Sentiment")
slabel.pack(pady=5)
sentiment = tk.Text(root, height=1, width=140, wrap='word')
sentiment.config(state="disabled", bg="#eeeeee")
sentiment.pack()

# URL label and text box
ulabel = ttk.Label(root, text="URL")
ulabel.pack(pady=5)
utext = tk.Text(root, height=1, width=140, wrap='word')
utext.pack()

# Summarize button
btn = ttk.Button(root, text="Summarize", command=summarize)
btn.pack(pady=20)

root.mainloop()
